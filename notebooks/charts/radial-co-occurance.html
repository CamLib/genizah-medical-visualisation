
<!DOCTYPE html>
<html>
<head>
  <style>
    .vega-actions a {
        margin-right: 12px;
        color: #757575;
        font-weight: normal;
        font-size: 13px;
    }
    .error {
        color: red;
    }
  </style>

<script src="https://cdn.jsdelivr.net/npm//vega@4"></script>
<script src="https://cdn.jsdelivr.net/npm//vega-embed@3"></script>

</head>
<body>
  <div id="vis"></div>
  <script type="text/javascript">
    var spec = {"$schema": "https://vega.github.io/schema/vega/v4.json", "padding": 5, "width": 720, "height": 720, "autosize": "none", "signals": [{"name": "tension", "value": 0.85}, {"name": "radius", "value": 280}, {"name": "extent", "value": 360}, {"name": "rotate", "value": 0}, {"name": "textSize", "value": 15}, {"name": "textOffset", "value": 8}, {"name": "layout", "value": "cluster"}, {"name": "colorIn", "value": "forestgreen"}, {"name": "colorOut", "value": "forestgreen"}, {"name": "originX", "update": "width / 2"}, {"name": "originY", "update": "height / 2"}, {"name": "active", "value": null, "on": [{"events": "text:mouseover", "update": "datum.index"}, {"events": "mouseover[!event.item]", "update": "null"}]}], "data": [{"name": "tree", "values": [{"index": 0, "label": "root", "parent": null, "type": "root"}, {"index": 1, "label": "authority", "parent": 0, "type": "category"}, {"index": 2, "label": "body_part", "parent": 0, "type": "category"}, {"index": 3, "label": "ailment", "parent": 0, "type": "category"}, {"index": 4, "label": "treatment", "parent": 0, "type": "category"}, {"index": 5, "label": "ingredient", "parent": 0, "type": "category"}, {"index": 6, "label": "al-ka\u1e25\u1e25\u0101l\u012bn", "parent": 1, "type": "token"}, {"index": 7, "label": "avicenna", "parent": 1, "type": "token"}, {"index": 8, "label": "canon", "parent": 1, "type": "token"}, {"index": 9, "label": "hippocrates", "parent": 1, "type": "token"}, {"index": 10, "label": "maimonides", "parent": 1, "type": "token"}, {"index": 11, "label": "galen", "parent": 1, "type": "token"}, {"index": 12, "label": "galenic", "parent": 1, "type": "token"}, {"index": 13, "label": "tibbon", "parent": 1, "type": "token"}, {"index": 14, "label": "eye", "parent": 2, "type": "token"}, {"index": 15, "label": "body", "parent": 2, "type": "token"}, {"index": 16, "label": "liver", "parent": 2, "type": "token"}, {"index": 17, "label": "anatomy", "parent": 2, "type": "token"}, {"index": 18, "label": "eyelid", "parent": 2, "type": "token"}, {"index": 19, "label": "blood", "parent": 2, "type": "token"}, {"index": 20, "label": "human", "parent": 2, "type": "token"}, {"index": 21, "label": "bladder", "parent": 2, "type": "token"}, {"index": 22, "label": "intestine", "parent": 2, "type": "token"}, {"index": 23, "label": "stomach", "parent": 2, "type": "token"}, {"index": 24, "label": "skin", "parent": 2, "type": "token"}, {"index": 25, "label": "spleen", "parent": 2, "type": "token"}, {"index": 26, "label": "organ", "parent": 2, "type": "token"}, {"index": 27, "label": "kidney", "parent": 2, "type": "token"}, {"index": 28, "label": "lung", "parent": 2, "type": "token"}, {"index": 29, "label": "vein", "parent": 2, "type": "token"}, {"index": 30, "label": "disease", "parent": 3, "type": "token"}, {"index": 31, "label": "fever", "parent": 3, "type": "token"}, {"index": 32, "label": "ailment", "parent": 3, "type": "token"}, {"index": 33, "label": "pain", "parent": 3, "type": "token"}, {"index": 34, "label": "colic", "parent": 3, "type": "token"}, {"index": 35, "label": "illness", "parent": 3, "type": "token"}, {"index": 36, "label": "intercourse", "parent": 3, "type": "token"}, {"index": 37, "label": "diarrhoea", "parent": 3, "type": "token"}, {"index": 38, "label": "cataract", "parent": 3, "type": "token"}, {"index": 39, "label": "ache", "parent": 3, "type": "token"}, {"index": 40, "label": "sexual", "parent": 3, "type": "token"}, {"index": 41, "label": "symptom", "parent": 3, "type": "token"}, {"index": 42, "label": "inflammation", "parent": 3, "type": "token"}, {"index": 43, "label": "medicine", "parent": 4, "type": "token"}, {"index": 44, "label": "medicament", "parent": 4, "type": "token"}, {"index": 45, "label": "collyrium", "parent": 4, "type": "token"}, {"index": 46, "label": "curing", "parent": 4, "type": "token"}, {"index": 47, "label": "astrological", "parent": 4, "type": "token"}, {"index": 48, "label": "humour", "parent": 4, "type": "token"}, {"index": 49, "label": "ointment", "parent": 4, "type": "token"}, {"index": 50, "label": "pharmacopoeia", "parent": 4, "type": "token"}, {"index": 51, "label": "phlebotomy", "parent": 4, "type": "token"}, {"index": 52, "label": "cure", "parent": 4, "type": "token"}, {"index": 53, "label": "operation", "parent": 4, "type": "token"}, {"index": 54, "label": "optician", "parent": 4, "type": "token"}, {"index": 55, "label": "ophthalmology", "parent": 4, "type": "token"}, {"index": 56, "label": "ophthalmological", "parent": 4, "type": "token"}, {"index": 57, "label": "wash", "parent": 4, "type": "token"}, {"index": 58, "label": "prognostication", "parent": 4, "type": "token"}, {"index": 59, "label": "remedy", "parent": 4, "type": "token"}, {"index": 60, "label": "heat", "parent": 4, "type": "token"}, {"index": 61, "label": "health", "parent": 4, "type": "token"}, {"index": 62, "label": "couching", "parent": 4, "type": "token"}, {"index": 63, "label": "oil", "parent": 5, "type": "token"}, {"index": 64, "label": "honey", "parent": 5, "type": "token"}, {"index": 65, "label": "saffron", "parent": 5, "type": "token"}, {"index": 66, "label": "rose", "parent": 5, "type": "token"}, {"index": 67, "label": "pepper", "parent": 5, "type": "token"}, {"index": 68, "label": "liquorice", "parent": 5, "type": "token"}, {"index": 69, "label": "cinnamon", "parent": 5, "type": "token"}, {"index": 70, "label": "camphor", "parent": 5, "type": "token"}, {"index": 71, "label": "almond", "parent": 5, "type": "token"}, {"index": 72, "label": "ammoniac", "parent": 5, "type": "token"}, {"index": 73, "label": "sesame", "parent": 5, "type": "token"}, {"index": 74, "label": "violet", "parent": 5, "type": "token"}, {"index": 75, "label": "olive", "parent": 5, "type": "token"}, {"index": 76, "label": "seed", "parent": 5, "type": "token"}, {"index": 77, "label": "sugar", "parent": 5, "type": "token"}, {"index": 78, "label": "sal", "parent": 5, "type": "token"}], "transform": [{"type": "stratify", "key": "index", "parentKey": "parent"}, {"type": "tree", "method": {"signal": "layout"}, "size": [1, 1], "as": ["alpha", "beta", "depth", "children"]}, {"type": "formula", "expr": "(rotate + extent * datum.alpha + 270) % 360", "as": "angle"}, {"type": "formula", "expr": "inrange(datum.angle, [90, 270])", "as": "leftside"}, {"type": "formula", "expr": "originX + radius * datum.beta * cos(PI * datum.angle / 180)", "as": "x"}, {"type": "formula", "expr": "originY + radius * datum.beta * sin(PI * datum.angle / 180)", "as": "y"}]}, {"name": "dependencies", "values": [{"source_id": 6, "target_id": 54, "count": 58}, {"source_id": 14, "target_id": 54, "count": 19}, {"source_id": 18, "target_id": 54, "count": 8}, {"source_id": 6, "target_id": 14, "count": 19}, {"source_id": 30, "target_id": 14, "count": 25}, {"source_id": 45, "target_id": 14, "count": 14}, {"source_id": 46, "target_id": 14, "count": 11}, {"source_id": 32, "target_id": 14, "count": 8}, {"source_id": 17, "target_id": 14, "count": 12}, {"source_id": 6, "target_id": 18, "count": 8}, {"source_id": 14, "target_id": 18, "count": 22}, {"source_id": 30, "target_id": 18, "count": 7}, {"source_id": 7, "target_id": 43, "count": 52}, {"source_id": 8, "target_id": 43, "count": 47}, {"source_id": 30, "target_id": 43, "count": 9}, {"source_id": 15, "target_id": 43, "count": 21}, {"source_id": 31, "target_id": 43, "count": 7}, {"source_id": 17, "target_id": 43, "count": 10}, {"source_id": 48, "target_id": 43, "count": 11}, {"source_id": 35, "target_id": 43, "count": 8}, {"source_id": 12, "target_id": 43, "count": 7}, {"source_id": 7, "target_id": 8, "count": 47}, {"source_id": 17, "target_id": 8, "count": 8}, {"source_id": 7, "target_id": 15, "count": 7}, {"source_id": 17, "target_id": 15, "count": 8}, {"source_id": 19, "target_id": 15, "count": 10}, {"source_id": 14, "target_id": 55, "count": 29}, {"source_id": 30, "target_id": 55, "count": 10}, {"source_id": 18, "target_id": 55, "count": 11}, {"source_id": 53, "target_id": 55, "count": 7}, {"source_id": 14, "target_id": 56, "count": 23}, {"source_id": 18, "target_id": 56, "count": 9}, {"source_id": 14, "target_id": 57, "count": 12}, {"source_id": 45, "target_id": 57, "count": 10}, {"source_id": 14, "target_id": 33, "count": 8}, {"source_id": 30, "target_id": 33, "count": 9}, {"source_id": 31, "target_id": 33, "count": 7}, {"source_id": 44, "target_id": 33, "count": 7}, {"source_id": 46, "target_id": 33, "count": 9}, {"source_id": 52, "target_id": 33, "count": 7}, {"source_id": 14, "target_id": 50, "count": 7}, {"source_id": 44, "target_id": 50, "count": 14}, {"source_id": 16, "target_id": 50, "count": 10}, {"source_id": 46, "target_id": 50, "count": 12}, {"source_id": 32, "target_id": 50, "count": 12}, {"source_id": 49, "target_id": 50, "count": 10}, {"source_id": 33, "target_id": 50, "count": 9}, {"source_id": 37, "target_id": 50, "count": 7}, {"source_id": 14, "target_id": 42, "count": 7}, {"source_id": 14, "target_id": 59, "count": 7}, {"source_id": 50, "target_id": 59, "count": 9}, {"source_id": 9, "target_id": 10, "count": 28}, {"source_id": 9, "target_id": 13, "count": 26}, {"source_id": 10, "target_id": 13, "count": 26}, {"source_id": 30, "target_id": 16, "count": 14}, {"source_id": 32, "target_id": 16, "count": 8}, {"source_id": 11, "target_id": 16, "count": 7}, {"source_id": 30, "target_id": 24, "count": 11}, {"source_id": 30, "target_id": 23, "count": 10}, {"source_id": 31, "target_id": 23, "count": 7}, {"source_id": 16, "target_id": 23, "count": 13}, {"source_id": 32, "target_id": 23, "count": 11}, {"source_id": 50, "target_id": 23, "count": 8}, {"source_id": 33, "target_id": 23, "count": 9}, {"source_id": 34, "target_id": 23, "count": 9}, {"source_id": 39, "target_id": 23, "count": 7}, {"source_id": 22, "target_id": 23, "count": 7}, {"source_id": 30, "target_id": 31, "count": 9}, {"source_id": 15, "target_id": 31, "count": 8}, {"source_id": 32, "target_id": 31, "count": 7}, {"source_id": 30, "target_id": 25, "count": 9}, {"source_id": 16, "target_id": 25, "count": 10}, {"source_id": 30, "target_id": 27, "count": 9}, {"source_id": 21, "target_id": 27, "count": 7}, {"source_id": 30, "target_id": 51, "count": 8}, {"source_id": 30, "target_id": 28, "count": 8}, {"source_id": 15, "target_id": 20, "count": 23}, {"source_id": 15, "target_id": 48, "count": 22}, {"source_id": 20, "target_id": 48, "count": 8}, {"source_id": 15, "target_id": 26, "count": 9}, {"source_id": 15, "target_id": 30, "count": 9}, {"source_id": 32, "target_id": 30, "count": 10}, {"source_id": 47, "target_id": 30, "count": 10}, {"source_id": 37, "target_id": 30, "count": 7}, {"source_id": 15, "target_id": 60, "count": 9}, {"source_id": 15, "target_id": 35, "count": 9}, {"source_id": 43, "target_id": 40, "count": 16}, {"source_id": 36, "target_id": 40, "count": 7}, {"source_id": 43, "target_id": 41, "count": 7}, {"source_id": 31, "target_id": 41, "count": 15}, {"source_id": 31, "target_id": 11, "count": 10}, {"source_id": 31, "target_id": 9, "count": 7}, {"source_id": 11, "target_id": 9, "count": 11}, {"source_id": 46, "target_id": 44, "count": 7}, {"source_id": 17, "target_id": 7, "count": 8}, {"source_id": 47, "target_id": 58, "count": 11}, {"source_id": 47, "target_id": 61, "count": 7}, {"source_id": 63, "target_id": 73, "count": 10}, {"source_id": 63, "target_id": 74, "count": 10}, {"source_id": 63, "target_id": 75, "count": 10}, {"source_id": 63, "target_id": 66, "count": 8}, {"source_id": 63, "target_id": 67, "count": 8}, {"source_id": 64, "target_id": 67, "count": 7}, {"source_id": 69, "target_id": 67, "count": 7}, {"source_id": 63, "target_id": 76, "count": 8}, {"source_id": 65, "target_id": 76, "count": 9}, {"source_id": 66, "target_id": 76, "count": 9}, {"source_id": 68, "target_id": 76, "count": 7}, {"source_id": 50, "target_id": 65, "count": 9}, {"source_id": 64, "target_id": 65, "count": 9}, {"source_id": 67, "target_id": 65, "count": 8}, {"source_id": 69, "target_id": 65, "count": 7}, {"source_id": 70, "target_id": 65, "count": 7}, {"source_id": 65, "target_id": 77, "count": 8}, {"source_id": 51, "target_id": 29, "count": 7}, {"source_id": 38, "target_id": 62, "count": 7}, {"source_id": 71, "target_id": 63, "count": 7}, {"source_id": 72, "target_id": 78, "count": 7}], "transform": [{"type": "formula", "expr": "treePath('tree', datum.source_id, datum.target_id)", "as": "treepath", "initonly": true}, {"type": "formula", "as": "is_active", "expr": "datum.source_id === active || datum.target_id === active"}]}, {"name": "selected_links", "source": "dependencies", "transform": [{"type": "filter", "expr": "datum.is_active"}]}, {"name": "unselected_links", "source": "dependencies", "transform": [{"type": "filter", "expr": "!datum.is_active"}]}, {"name": "leaves", "source": "tree", "transform": [{"type": "filter", "expr": "!datum.children"}, {"type": "lookup", "from": "tree", "key": "index", "fields": ["parent"], "values": ["label"], "as": ["group_label"]}, {"type": "lookup", "from": "selected_links", "key": "source_id", "fields": ["index"], "values": ["count"], "as": ["count_src"]}, {"type": "lookup", "from": "selected_links", "key": "target_id", "fields": ["index"], "values": ["count"], "as": ["count_dst"]}, {"type": "formula", "as": "selected_count", "expr": "datum.count_src || datum.count_dst"}, {"type": "formula", "as": "label_with_count", "expr": "datum.label + if(isNumber(datum.selected_count), \" (\" + datum.selected_count + \")\", \"\")"}]}, {"name": "token_groups", "source": "leaves", "transform": [{"type": "aggregate", "groupby": ["group_label"], "fields": ["alpha", "alpha"], "ops": ["min", "max"], "as": ["start_alpha", "end_alpha"]}, {"type": "formula", "expr": "rotate + extent * datum.start_alpha", "as": "start_angle_deg"}, {"type": "formula", "expr": "rotate + extent * datum.end_alpha", "as": "end_angle_deg"}, {"type": "formula", "expr": "(PI * (rotate + extent * datum.start_alpha) / 180)", "as": "start_angle"}, {"type": "formula", "expr": "(PI * (rotate + extent * datum.end_alpha) / 180)", "as": "end_angle"}]}], "marks": [{"type": "arc", "from": {"data": "token_groups"}, "encode": {"enter": {"x": {"signal": "originX"}, "y": {"signal": "originY"}, "fill": {"scale": "token_type", "field": "group_label"}, "outerRadius": {"signal": "radius + 6"}, "innerRadius": {"signal": "radius + 3"}, "fillOpacity": {"value": 0.5}, "tooltip": {"field": "group_label"}}, "update": {"startAngle": {"signal": "datum.start_angle - (PI * (extent / 360) / 180)"}, "endAngle": {"signal": "datum.end_angle + (PI * (extent / 360) / 180)"}}}}, {"type": "text", "from": {"data": "leaves"}, "encode": {"enter": {"baseline": {"value": "middle"}}, "update": {"x": {"field": "x"}, "y": {"field": "y"}, "dx": {"signal": "textOffset * (datum.leftside ? -1 : 1)"}, "angle": {"signal": "datum.leftside ? datum.angle - 180 : datum.angle"}, "align": {"signal": "datum.leftside ? 'right' : 'left'"}, "fontSize": {"signal": "textSize"}, "fontWeight": [{"value": null}], "fill": [{"test": "indata('selected_links', 'source_id', datum.index)", "scale": "colour2", "field": "selected_count"}, {"scale": "token_type", "field": "group_label"}], "opacity": [{"test": "indata('selected_links', 'source_id', datum.index)", "value": 1}, {"test": "indata('selected_links', 'target_id', datum.index)", "value": 1}, {"test": "active !== null", "value": 0.4}, {"value": 1}], "text": [{"test": "datum.index === active", "field": "label"}, {"field": "label_with_count"}]}}}, {"type": "group", "from": {"facet": {"name": "path", "data": "selected_links", "field": "treepath"}}, "zindex": 1, "marks": [{"type": "line", "interactive": false, "from": {"data": "path"}, "encode": {"enter": {"interpolate": {"value": "bundle"}, "strokeWidth": {"scale": "strokeSize", "field": {"parent": "count"}}, "strokeCap": {"value": "round"}}, "update": {"stroke": {"scale": "colour2", "field": {"parent": "count"}}, "strokeOpacity": [{"value": 0.6}], "tension": {"signal": "tension"}, "x": {"field": "x"}, "y": {"field": "y"}}}}]}, {"type": "group", "from": {"facet": {"name": "path", "data": "unselected_links", "field": "treepath"}}, "zindex": 0, "marks": [{"type": "line", "interactive": false, "from": {"data": "path"}, "encode": {"enter": {"interpolate": {"value": "bundle"}, "strokeWidth": {"scale": "strokeSize", "field": {"parent": "count"}}, "strokeCap": {"value": "round"}}, "update": {"stroke": {"value": "#538fc1"}, "strokeOpacity": [{"test": "active !== null", "value": 0.05}, {"value": 0.2}], "tension": {"signal": "tension"}, "x": {"field": "x"}, "y": {"field": "y"}}}}]}], "scales": [{"name": "color", "type": "ordinal", "domain": ["depends on", "imported by"], "range": [{"signal": "colorIn"}, {"signal": "colorOut"}]}, {"name": "colour2", "type": "linear", "domain": {"data": "dependencies", "field": "count"}, "range": ["#fdbb84", "#7f0000"]}, {"name": "strokeSize", "type": "linear", "zero": true, "domain": {"data": "dependencies", "field": "count"}, "range": [1.5, 5]}, {"name": "token_type", "type": "ordinal", "domain": {"data": "token_groups", "field": "group_label"}, "range": ["#2ca02c", "#d62728", "#724F91", "#8c564b", "#656612"]}], "legends": [{"fill": "colour2", "type": "gradient", "orient": "top-left", "title": "Co-occurrence frequency"}, {"fill": "token_type", "type": "symbol", "orient": "top-right", "title": "Token types"}]};
    var embed_opt = {"width": 720, "height": 720, "mode": "vega"};

    function showError(el, error){
        el.innerHTML = ('<div class="error">'
                        + '<p>JavaScript Error: ' + error.message + '</p>'
                        + "<p>This usually means there's a typo in your chart specification. "
                        + "See the javascript console for the full traceback.</p>"
                        + '</div>');
        throw error;
    }
    const el = document.getElementById('vis');
    vegaEmbed("#vis", spec, embed_opt)
      .catch(error => showError(el, error));
  </script>
</body>
</html>
